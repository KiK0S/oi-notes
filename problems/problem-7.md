---
layout: page
title: "7. Есть ли цикл?"
permalink: /oi-notes/problems/problem-7/
lang: ru
contest: bp2025-dfs1
problem_code: G
problem_id: 7
---

## Задача

Дан ориентированный граф. Необходимо определить, содержит ли он цикл.

### Входные данные

В первой строке указаны числа $n$ и $m$ ($1 \leqslant n, m \leqslant 10^5$) — количество вершин и рёбер. В следующих $m$ строках записаны пары $u$, $v$ ($1 \leqslant u, v \leqslant n$) — ориентированные рёбра графа.

### Выходные данные

Выведите `1`, если в графе есть цикл, и `0` иначе.

### Примеры

```
стандартный ввод      стандартный вывод
4 4                    1
1 2
2 3
3 4
4 1

3 2                    0
1 2
1 3
```

### Ограничения

- Время: 1 секунда
- Память: 256 мегабайт

<details class="dsa-toggle">
<summary>Редакционный разбор</summary>

Используем DFS с раскраской вершин в три состояния: `0` — не посещена, `1` — сейчас в стеке рекурсии, `2` — полностью обработана. Когда из вершины идём по ребру в вершину цвета `1`, найден цикл. Если обход завершился без таких ситуаций, граф ацикличен.

Альтернативно можно выполнить топологическую сортировку алгоритмом Кана: если удаётся вынести все вершины, цикла нет, иначе — есть. Обе реализации работают за $O(n + m)$.

</details>
### Mentioned by

<!-- dsa-mentioned-by:start -->
- [DFS1 — параллель B'](../../../bp2025/contests/dfs1/){: .dsa-mention } — G: 7. Есть ли цикл?
- [Каталог задач](../../../problems/){: .dsa-mention } — G: 7. Есть ли цикл?
<!-- dsa-mentioned-by:end -->

